webpackJsonp([2],{T6qG:function(a,n,t){var e=t("kxFB");n=a.exports=t("FZ+f")(!0),n.push([a.i,"\n.linear-gradient-horizontal[data-v-1ca2cada] {\n  background: -webkit-linear-gradient(left, #FF9800 0%, #FF5F00 100%);\n  background: linear-gradient(90deg, #FF9800 0%, #FF5F00 100%);\n}\n.linear-gradient-horizontal-opacity[data-v-1ca2cada] {\n  background: -webkit-linear-gradient(left, rgba(255, 152, 0, 0.5) 0%, rgba(255, 95, 0, 0.5) 100%);\n  background: linear-gradient(90deg, rgba(255, 152, 0, 0.5) 0%, rgba(255, 95, 0, 0.5) 100%);\n}\n.linear-gradient-vertical[data-v-1ca2cada] {\n  background: -webkit-linear-gradient(315deg, #FF9800 0%, #FF5F00 100%);\n  background: linear-gradient(135deg, #FF9800 0%, #FF5F00 100%);\n}\n.primary-box-shadow[data-v-1ca2cada] {\n  box-shadow: 0 5px 10px 0 rgba(255, 141, 0, 0.3);\n}\n.welfare-exchange[data-v-1ca2cada] {\n  background: #f6f6f6;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n          flex-direction: column;\n  height: 100vh;\n  overflow: hidden;\n}\n.list[data-v-1ca2cada] {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n          flex: 1;\n  overflow: auto;\n  padding: 16px;\n}\n.list > li + li[data-v-1ca2cada] {\n  margin-top: 12px;\n}\n.item[data-v-1ca2cada] {\n  padding: 12px;\n  background: #fff;\n}\n.item-content[data-v-1ca2cada] {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n}\n.w-radio[data-v-1ca2cada] {\n  margin-left: 6px;\n  height: 20px;\n  opacity: 0;\n  margin-right: 8px;\n}\n.w-radio-next[data-v-1ca2cada] {\n  position: relative;\n}\n.w-radio-next > .radio-box[data-v-1ca2cada] {\n  position: absolute;\n  top: 35px;\n  left: -28px;\n  width: 20px;\n  height: 20px;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 20px;\n}\n.w-radio-next > .radio-box.checked[data-v-1ca2cada] {\n  border-width: 0;\n  background: -webkit-linear-gradient(left, #FF9800 0%, #FF5F00 100%);\n  background: linear-gradient(90deg, #FF9800 0%, #FF5F00 100%);\n  box-shadow: 0px 0px 3px 3px rgba(255, 141, 0, 0.4);\n}\n.w-radio-next > .radio-box.checked[data-v-1ca2cada]::before {\n  content: '';\n  position: absolute;\n  top: -1px;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: url("+e(t("TeOC"))+");\n  background-position: center;\n  background-size: 60%;\n  background-repeat: no-repeat;\n}\nfooter[data-v-1ca2cada] {\n  height: 46px;\n  padding: 10px 16px;\n  background: #fafafa;\n}\n.mobile-dialog .box[data-v-1ca2cada],\n.empty-dialog .box[data-v-1ca2cada] {\n  background: #fff;\n  border-radius: 16px;\n}\n.mobile-dialog .box .content[data-v-1ca2cada],\n.empty-dialog .box .content[data-v-1ca2cada] {\n  padding: 16px 18px;\n}\n.mobile-dialog .box .btn[data-v-1ca2cada],\n.empty-dialog .box .btn[data-v-1ca2cada] {\n  padding: 12px;\n  border-top: 1px solid #e6e6e6;\n}\n.mobile-dialog .box .btn > button[data-v-1ca2cada],\n.empty-dialog .box .btn > button[data-v-1ca2cada] {\n  width: 140px;\n}\n.mobile-dialog[data-v-1ca2cada] .weui-cells:after,\n.empty-dialog[data-v-1ca2cada] .weui-cells:after {\n  content: none;\n}\n.mobile-dialog[data-v-1ca2cada] .weui-cell:before,\n.empty-dialog[data-v-1ca2cada] .weui-cell:before {\n  content: none;\n}\n.mobile-dialog[data-v-1ca2cada] .vux-x-input,\n.empty-dialog[data-v-1ca2cada] .vux-x-input {\n  background: #F0F0F0;\n  border-radius: 44px;\n  margin-top: 12px;\n  font-size: 14px;\n}\n.empty-dialog[data-v-1ca2cada] {\n  font-size: 14px;\n}\n.empty-dialog .pic[data-v-1ca2cada] {\n  width: 163px;\n  height: 135px;\n  margin: 16px auto;\n  background-image: url("+e(t("oVBp"))+");\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n","",{version:3,sources:["/Users/lex/Works/CheckIn/user_side/src/views/WelfareExchange.vue"],names:[],mappings:";AACA;EACE,oEAAoE;EACpE,6DAA6D;CAC9D;AACD;EACE,iGAAiG;EACjG,0FAA0F;CAC3F;AACD;EACE,sEAAsE;EACtE,8DAA8D;CAC/D;AACD;EACE,gDAAgD;CACjD;AACD;EACE,oBAAoB;EACpB,qBAAqB;EACrB,sBAAsB;EACtB,cAAc;EACd,6BAA6B;EAC7B,8BAA8B;EAC9B,+BAA+B;UACvB,uBAAuB;EAC/B,cAAc;EACd,iBAAiB;CAClB;AACD;EACE,oBAAoB;EACpB,gBAAgB;UACR,QAAQ;EAChB,eAAe;EACf,cAAc;CACf;AACD;EACE,iBAAiB;CAClB;AACD;EACE,cAAc;EACd,iBAAiB;CAClB;AACD;EACE,qBAAqB;EACrB,sBAAsB;EACtB,cAAc;EACd,0BAA0B;EAC1B,4BAA4B;UACpB,oBAAoB;CAC7B;AACD;EACE,iBAAiB;EACjB,aAAa;EACb,WAAW;EACX,kBAAkB;CACnB;AACD;EACE,mBAAmB;CACpB;AACD;EACE,mBAAmB;EACnB,UAAU;EACV,YAAY;EACZ,YAAY;EACZ,aAAa;EACb,qCAAqC;EACrC,oBAAoB;CACrB;AACD;EACE,gBAAgB;EAChB,oEAAoE;EACpE,6DAA6D;EAC7D,mDAAmD;CACpD;AACD;EACE,YAAY;EACZ,mBAAmB;EACnB,UAAU;EACV,QAAQ;EACR,YAAY;EACZ,aAAa;EACb,0CAA4C;EAC5C,4BAA4B;EAC5B,qBAAqB;EACrB,6BAA6B;CAC9B;AACD;EACE,aAAa;EACb,mBAAmB;EACnB,oBAAoB;CACrB;AACD;;EAEE,iBAAiB;EACjB,oBAAoB;CACrB;AACD;;EAEE,mBAAmB;CACpB;AACD;;EAEE,cAAc;EACd,8BAA8B;CAC/B;AACD;;EAEE,aAAa;CACd;AACD;;EAEE,cAAc;CACf;AACD;;EAEE,cAAc;CACf;AACD;;EAEE,oBAAoB;EACpB,oBAAoB;EACpB,iBAAiB;EACjB,gBAAgB;CACjB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,aAAa;EACb,cAAc;EACd,kBAAkB;EAClB,gDAA6D;EAC7D,6BAA6B;EAC7B,yBAAyB;CAC1B",file:"WelfareExchange.vue",sourcesContent:["\n.linear-gradient-horizontal[data-v-1ca2cada] {\n  background: -webkit-linear-gradient(left, #FF9800 0%, #FF5F00 100%);\n  background: linear-gradient(90deg, #FF9800 0%, #FF5F00 100%);\n}\n.linear-gradient-horizontal-opacity[data-v-1ca2cada] {\n  background: -webkit-linear-gradient(left, rgba(255, 152, 0, 0.5) 0%, rgba(255, 95, 0, 0.5) 100%);\n  background: linear-gradient(90deg, rgba(255, 152, 0, 0.5) 0%, rgba(255, 95, 0, 0.5) 100%);\n}\n.linear-gradient-vertical[data-v-1ca2cada] {\n  background: -webkit-linear-gradient(315deg, #FF9800 0%, #FF5F00 100%);\n  background: linear-gradient(135deg, #FF9800 0%, #FF5F00 100%);\n}\n.primary-box-shadow[data-v-1ca2cada] {\n  box-shadow: 0 5px 10px 0 rgba(255, 141, 0, 0.3);\n}\n.welfare-exchange[data-v-1ca2cada] {\n  background: #f6f6f6;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n          flex-direction: column;\n  height: 100vh;\n  overflow: hidden;\n}\n.list[data-v-1ca2cada] {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n          flex: 1;\n  overflow: auto;\n  padding: 16px;\n}\n.list > li + li[data-v-1ca2cada] {\n  margin-top: 12px;\n}\n.item[data-v-1ca2cada] {\n  padding: 12px;\n  background: #fff;\n}\n.item-content[data-v-1ca2cada] {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n}\n.w-radio[data-v-1ca2cada] {\n  margin-left: 6px;\n  height: 20px;\n  opacity: 0;\n  margin-right: 8px;\n}\n.w-radio-next[data-v-1ca2cada] {\n  position: relative;\n}\n.w-radio-next > .radio-box[data-v-1ca2cada] {\n  position: absolute;\n  top: 35px;\n  left: -28px;\n  width: 20px;\n  height: 20px;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 20px;\n}\n.w-radio-next > .radio-box.checked[data-v-1ca2cada] {\n  border-width: 0;\n  background: -webkit-linear-gradient(left, #FF9800 0%, #FF5F00 100%);\n  background: linear-gradient(90deg, #FF9800 0%, #FF5F00 100%);\n  box-shadow: 0px 0px 3px 3px rgba(255, 141, 0, 0.4);\n}\n.w-radio-next > .radio-box.checked[data-v-1ca2cada]::before {\n  content: '';\n  position: absolute;\n  top: -1px;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: url('../assets/sign_right.png');\n  background-position: center;\n  background-size: 60%;\n  background-repeat: no-repeat;\n}\nfooter[data-v-1ca2cada] {\n  height: 46px;\n  padding: 10px 16px;\n  background: #fafafa;\n}\n.mobile-dialog .box[data-v-1ca2cada],\n.empty-dialog .box[data-v-1ca2cada] {\n  background: #fff;\n  border-radius: 16px;\n}\n.mobile-dialog .box .content[data-v-1ca2cada],\n.empty-dialog .box .content[data-v-1ca2cada] {\n  padding: 16px 18px;\n}\n.mobile-dialog .box .btn[data-v-1ca2cada],\n.empty-dialog .box .btn[data-v-1ca2cada] {\n  padding: 12px;\n  border-top: 1px solid #e6e6e6;\n}\n.mobile-dialog .box .btn > button[data-v-1ca2cada],\n.empty-dialog .box .btn > button[data-v-1ca2cada] {\n  width: 140px;\n}\n.mobile-dialog[data-v-1ca2cada] .weui-cells:after,\n.empty-dialog[data-v-1ca2cada] .weui-cells:after {\n  content: none;\n}\n.mobile-dialog[data-v-1ca2cada] .weui-cell:before,\n.empty-dialog[data-v-1ca2cada] .weui-cell:before {\n  content: none;\n}\n.mobile-dialog[data-v-1ca2cada] .vux-x-input,\n.empty-dialog[data-v-1ca2cada] .vux-x-input {\n  background: #F0F0F0;\n  border-radius: 44px;\n  margin-top: 12px;\n  font-size: 14px;\n}\n.empty-dialog[data-v-1ca2cada] {\n  font-size: 14px;\n}\n.empty-dialog .pic[data-v-1ca2cada] {\n  width: 163px;\n  height: 135px;\n  margin: 16px auto;\n  background-image: url(../assets/welfare_exchange_failed.png);\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n"],sourceRoot:""}])},cafJ:function(a,n,t){"use strict";function e(a){t("eCxa")}Object.defineProperty(n,"__esModule",{value:!0});var i=t("//Fk"),o=t.n(i),d=t("6kxu"),c=t("PPEA"),r=(String,Number,String,String,Boolean,String,Boolean,{name:"WCountdown",props:{color:{type:String,default:"#33B87E"},startNum:{type:Number,default:60},initTxt:{type:String,default:"获取验证码"},countingTxt:{type:[String,Boolean]},endTxt:{type:String,default:"重新获取"},value:{type:Boolean}},computed:{countingShowTxt:function(){var a=this.timeCount>9?this.timeCount:"0"+this.timeCount;if(this.countingTxt){if("string"==typeof this.countingTxt){return this.countingTxt.indexOf("$time")>-1?this.countingTxt.replace("$time",a):this.countingTxt+"("+a+")"}return this.endTxt+"("+a+")"}return a}},data:function(){return{timer:null,timeCount:this.startNum,showTxt:this.initTxt}},watch:{value:function(a){a&&this.startCount()}},methods:{startCount:function(){var a=this;this.timer=setInterval(function(){a.timeCount>0?a.timeCount=a.timeCount-1:(clearInterval(a.timer),a.$emit("input",!1),a.timeCount=a.startNum,a.showTxt=a.endTxt)},1e3)},handleClick:function(){this.value||this.$emit("click-event")}}}),l=function(){var a=this,n=a.$createElement;return(a._self._c||n)("span",{staticClass:"count-down",style:{color:a.value?"#ccc":a.color},on:{click:a.handleClick}},[a._v("\n    "+a._s(a.value?a.countingShowTxt:a.showTxt)+"\n")])},s=[],A={render:l,staticRenderFns:s},g=A,p=t("VU/8"),u=p(r,g,!1,null,null,null),b=u.exports,x=t("gyMJ"),C=t("mw3O"),h=t.n(C),m=t("DpJg"),f=t("fxnj"),v=/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/,B=(d.a,c.a,t("fxnj")),E=/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/,w={name:"WelfareExchange",components:{WCard:d.a,WMerchantItem:c.a,WCountdown:b},data:function(){return{selected:"",list:[],lon:"",lat:"",mobile:"",code:"",countStart:!1,mobileDialog:{show:!1},emptyDialog:{show:!1}}},computed:{welfareList:function(){return this.list.map(function(a){a.desc="签到"+a.checkin_days+"天，即享"+a.checkin_num+"瓶啤酒";var n={filename:a.store_avatar,type:"avatar"};return a.store_avatar=m.a+"v1/files/download?"+h.a.stringify(n),a})},countColor:function(){return E.test(this.mobile)?"#FF5F00":"#666"},exchangeDisabled:function(){return!(E.test(this.mobile)&&this.code)}},created:function(){this.initExchage(),this.initUser()},methods:{initUser:function(){var a=this;Object(x.k)().then(function(n){var t=n.data;a.mobile=t.mobile})},initExchage:function(){var a=this;this.getLocation().then(function(){var n={lon:a.lon,lat:a.lat,distince:9999999,num:999999};Object(x.h)(n).then(function(n){var t=n.data;n.res;a.list=t||[]})})},getLocation:function(){var a=this;return new o.a(function(n,t){B.getLocation({type:"wgs84",success:function(t){a.lon=t.longitude,a.lat=t.latitude,n()}})})},handleSelect:function(a){this.selected=a},handleExchange:function(){this.mobile?this.exchange():this.mobileDialog.show=!0},exchange:function(){var a=this,n={merchant_id:this.selected,mobile:this.mobile,code:this.code};Object(x.d)(n).then(function(n){var t=n.res;a.mobileDialog.show=!1,"ERR_NO_WELFARE"===t.code?a.emptyDialog.show=!0:a.$vux.toast.show({type:"text",text:t.message}),a.initExchage()})},handleStart:function(){var a=this;E.test(this.mobile)&&Object(x.l)({mobile:this.mobile}).then(function(n){n.res;a.$vux.toast.show({type:"text",text:"验证码发送成功"}),a.countStart=!0})},handleGoSign:function(){this.$router.replace({name:"sign_page"})}}},k=function(){var a=this,n=a.$createElement,t=a._self._c||n;return t("div",{staticClass:"welfare-exchange"},[t("ul",{staticClass:"list"},a._l(a.welfareList,function(n){return t("li",{key:n.id,on:{click:function(t){return a.handleSelect(n.id)}}},[t("w-card",{staticClass:"item"},[t("div",{staticClass:"item-content"},[t("input",{staticClass:"w-radio",attrs:{type:"radio",name:"select",id:n.id},domProps:{checked:n.id===a.selected}}),a._v(" "),t("label",{staticClass:"w-radio-next",attrs:{for:n.id}},[t("span",{class:["radio-box",{checked:n.id===a.selected}]}),a._v(" "),t("w-merchant-item",{attrs:{name:n.store_name,address:n.address,desc:n.desc,logo:n.store_avatar}})],1)])])],1)}),0),a._v(" "),t("footer",[t("x-button",{attrs:{type:"primary",disabled:!a.selected},nativeOn:{click:function(n){return a.handleExchange(n)}}},[a._v("领取福利")])],1),a._v(" "),t("x-dialog",{staticClass:"mobile-dialog",attrs:{"dialog-style":{"max-width":"100%","background-color":"transparent",margin:"184px 34px"}},model:{value:a.mobileDialog.show,callback:function(n){a.$set(a.mobileDialog,"show",n)},expression:"mobileDialog.show"}},[t("div",{staticClass:"box"},[t("div",{staticClass:"content"},[t("h2",{staticClass:"title"},[a._v("输入手机号，领取您的福利")]),a._v(" "),t("group",{staticClass:"form-group"},[t("x-input",{attrs:{placeholder:"请输入手机号",type:"text","is-type":"china-mobile"},model:{value:a.mobile,callback:function(n){a.mobile=n},expression:"mobile"}},[t("w-countdown",{attrs:{slot:"right",color:a.countColor},on:{"click-event":a.handleStart},slot:"right",model:{value:a.countStart,callback:function(n){a.countStart=n},expression:"countStart"}})],1),a._v(" "),t("x-input",{attrs:{placeholder:"请输入验证码"},model:{value:a.code,callback:function(n){a.code=n},expression:"code"}})],1)],1),a._v(" "),t("div",{staticClass:"btn"},[t("x-button",{attrs:{mini:"",type:"primary",disabled:a.exchangeDisabled},nativeOn:{click:function(n){return a.exchange(n)}}},[a._v("领取福利")])],1)])]),a._v(" "),t("x-dialog",{staticClass:"empty-dialog",attrs:{"dialog-style":{"max-width":"100%","background-color":"transparent",margin:"184px 34px"}},model:{value:a.emptyDialog.show,callback:function(n){a.$set(a.emptyDialog,"show",n)},expression:"emptyDialog.show"}},[t("div",{staticClass:"box"},[t("div",{staticClass:"content"},[t("div",{staticClass:"pic"}),a._v(" "),t("p",[a._v("你还没有完成签到任务哦"),t("br"),a._v("赶快去签到吧~")])]),a._v(" "),t("div",{staticClass:"btn"},[t("x-button",{attrs:{mini:"",type:"primary",disabled:a.exchangeDisabled},nativeOn:{click:function(n){return a.handleGoSign(n)}}},[a._v("去签到")])],1)])])],1)},F=[],y={render:k,staticRenderFns:F},D=y,_=t("VU/8"),S=e,T=_(w,D,!1,S,"data-v-1ca2cada",null);n.default=T.exports},eCxa:function(a,n,t){var e=t("T6qG");"string"==typeof e&&(e=[[a.i,e,""]]),e.locals&&(a.exports=e.locals);t("rjj0")("20545038",e,!0,{})},oVBp:function(a,n,t){a.exports=t.p+"static/img/welfare_exchange_failed.f09c0fe.png"}});
//# sourceMappingURL=2.1d44ff557fb6176aa76e.js.map