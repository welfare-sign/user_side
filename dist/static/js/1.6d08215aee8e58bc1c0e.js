webpackJsonp([1],{XfhG:function(e,n,t){var a=t("kxFB");n=e.exports=t("FZ+f")(!0),n.push([e.i,"\n.linear-gradient-horizontal[data-v-5ebfce82] {\n  background: -webkit-linear-gradient(left, #FF9800 0%, #FF5F00 100%);\n  background: linear-gradient(90deg, #FF9800 0%, #FF5F00 100%);\n}\n.linear-gradient-horizontal-opacity[data-v-5ebfce82] {\n  background: -webkit-linear-gradient(left, rgba(255, 152, 0, 0.5) 0%, rgba(255, 95, 0, 0.5) 100%);\n  background: linear-gradient(90deg, rgba(255, 152, 0, 0.5) 0%, rgba(255, 95, 0, 0.5) 100%);\n}\n.linear-gradient-vertical[data-v-5ebfce82] {\n  background: -webkit-linear-gradient(315deg, #FF9800 0%, #FF5F00 100%);\n  background: linear-gradient(135deg, #FF9800 0%, #FF5F00 100%);\n}\n.primary-box-shadow[data-v-5ebfce82] {\n  box-shadow: 0 5px 10px 0 rgba(255, 141, 0, 0.3);\n}\n.welfare-exchange[data-v-5ebfce82] {\n  background: #f6f6f6;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n          flex-direction: column;\n  height: 100vh;\n  overflow: hidden;\n}\n.list[data-v-5ebfce82] {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n          flex: 1;\n  overflow: auto;\n  padding: 16px;\n}\n.list > li + li[data-v-5ebfce82] {\n  margin-top: 12px;\n}\n.item[data-v-5ebfce82] {\n  padding: 12px;\n  background: #fff;\n}\n.item-content[data-v-5ebfce82] {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n}\n.w-radio[data-v-5ebfce82] {\n  margin-left: 6px;\n  height: 20px;\n  opacity: 0;\n  margin-right: 8px;\n}\n.w-radio-next[data-v-5ebfce82] {\n  position: relative;\n}\n.w-radio-next > .radio-box[data-v-5ebfce82] {\n  position: absolute;\n  top: 35px;\n  left: -28px;\n  width: 20px;\n  height: 20px;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 20px;\n}\n.w-radio-next > .radio-box.checked[data-v-5ebfce82] {\n  border-width: 0;\n  background: -webkit-linear-gradient(left, #FF9800 0%, #FF5F00 100%);\n  background: linear-gradient(90deg, #FF9800 0%, #FF5F00 100%);\n  box-shadow: 0px 0px 3px 3px rgba(255, 141, 0, 0.4);\n}\n.w-radio-next > .radio-box.checked[data-v-5ebfce82]::before {\n  content: '';\n  position: absolute;\n  top: -1px;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: url("+a(t("TeOC"))+");\n  background-position: center;\n  background-size: 60%;\n  background-repeat: no-repeat;\n}\nfooter[data-v-5ebfce82] {\n  height: 46px;\n  padding: 10px 16px;\n  background: #fafafa;\n}\n.mobile-dialog .box[data-v-5ebfce82],\n.empty-dialog .box[data-v-5ebfce82] {\n  background: #fff;\n  border-radius: 16px;\n}\n.mobile-dialog .box .content[data-v-5ebfce82],\n.empty-dialog .box .content[data-v-5ebfce82] {\n  padding: 16px 18px;\n}\n.mobile-dialog .box .btn[data-v-5ebfce82],\n.empty-dialog .box .btn[data-v-5ebfce82] {\n  padding: 12px;\n  border-top: 1px solid #e6e6e6;\n}\n.mobile-dialog .box .btn > button[data-v-5ebfce82],\n.empty-dialog .box .btn > button[data-v-5ebfce82] {\n  width: 140px;\n}\n.mobile-dialog[data-v-5ebfce82] .weui-cells:after,\n.empty-dialog[data-v-5ebfce82] .weui-cells:after {\n  content: none;\n}\n.mobile-dialog[data-v-5ebfce82] .weui-cell:before,\n.empty-dialog[data-v-5ebfce82] .weui-cell:before {\n  content: none;\n}\n.mobile-dialog[data-v-5ebfce82] .vux-x-input,\n.empty-dialog[data-v-5ebfce82] .vux-x-input {\n  background: #F0F0F0;\n  border-radius: 44px;\n  margin-top: 12px;\n  font-size: 14px;\n}\n.empty-dialog[data-v-5ebfce82] {\n  font-size: 14px;\n}\n.empty-dialog .pic[data-v-5ebfce82] {\n  width: 163px;\n  height: 135px;\n  margin: 16px auto;\n  background-image: url("+a(t("oVBp"))+");\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n","",{version:3,sources:["/Users/lex/Works/CheckIn/user_side/src/views/WelfareExchange.vue"],names:[],mappings:";AACA;EACE,oEAAoE;EACpE,6DAA6D;CAC9D;AACD;EACE,iGAAiG;EACjG,0FAA0F;CAC3F;AACD;EACE,sEAAsE;EACtE,8DAA8D;CAC/D;AACD;EACE,gDAAgD;CACjD;AACD;EACE,oBAAoB;EACpB,qBAAqB;EACrB,sBAAsB;EACtB,cAAc;EACd,6BAA6B;EAC7B,8BAA8B;EAC9B,+BAA+B;UACvB,uBAAuB;EAC/B,cAAc;EACd,iBAAiB;CAClB;AACD;EACE,oBAAoB;EACpB,gBAAgB;UACR,QAAQ;EAChB,eAAe;EACf,cAAc;CACf;AACD;EACE,iBAAiB;CAClB;AACD;EACE,cAAc;EACd,iBAAiB;CAClB;AACD;EACE,qBAAqB;EACrB,sBAAsB;EACtB,cAAc;EACd,0BAA0B;EAC1B,4BAA4B;UACpB,oBAAoB;CAC7B;AACD;EACE,iBAAiB;EACjB,aAAa;EACb,WAAW;EACX,kBAAkB;CACnB;AACD;EACE,mBAAmB;CACpB;AACD;EACE,mBAAmB;EACnB,UAAU;EACV,YAAY;EACZ,YAAY;EACZ,aAAa;EACb,qCAAqC;EACrC,oBAAoB;CACrB;AACD;EACE,gBAAgB;EAChB,oEAAoE;EACpE,6DAA6D;EAC7D,mDAAmD;CACpD;AACD;EACE,YAAY;EACZ,mBAAmB;EACnB,UAAU;EACV,QAAQ;EACR,YAAY;EACZ,aAAa;EACb,0CAA4C;EAC5C,4BAA4B;EAC5B,qBAAqB;EACrB,6BAA6B;CAC9B;AACD;EACE,aAAa;EACb,mBAAmB;EACnB,oBAAoB;CACrB;AACD;;EAEE,iBAAiB;EACjB,oBAAoB;CACrB;AACD;;EAEE,mBAAmB;CACpB;AACD;;EAEE,cAAc;EACd,8BAA8B;CAC/B;AACD;;EAEE,aAAa;CACd;AACD;;EAEE,cAAc;CACf;AACD;;EAEE,cAAc;CACf;AACD;;EAEE,oBAAoB;EACpB,oBAAoB;EACpB,iBAAiB;EACjB,gBAAgB;CACjB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,aAAa;EACb,cAAc;EACd,kBAAkB;EAClB,gDAA6D;EAC7D,6BAA6B;EAC7B,yBAAyB;CAC1B",file:"WelfareExchange.vue",sourcesContent:["\n.linear-gradient-horizontal[data-v-5ebfce82] {\n  background: -webkit-linear-gradient(left, #FF9800 0%, #FF5F00 100%);\n  background: linear-gradient(90deg, #FF9800 0%, #FF5F00 100%);\n}\n.linear-gradient-horizontal-opacity[data-v-5ebfce82] {\n  background: -webkit-linear-gradient(left, rgba(255, 152, 0, 0.5) 0%, rgba(255, 95, 0, 0.5) 100%);\n  background: linear-gradient(90deg, rgba(255, 152, 0, 0.5) 0%, rgba(255, 95, 0, 0.5) 100%);\n}\n.linear-gradient-vertical[data-v-5ebfce82] {\n  background: -webkit-linear-gradient(315deg, #FF9800 0%, #FF5F00 100%);\n  background: linear-gradient(135deg, #FF9800 0%, #FF5F00 100%);\n}\n.primary-box-shadow[data-v-5ebfce82] {\n  box-shadow: 0 5px 10px 0 rgba(255, 141, 0, 0.3);\n}\n.welfare-exchange[data-v-5ebfce82] {\n  background: #f6f6f6;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n          flex-direction: column;\n  height: 100vh;\n  overflow: hidden;\n}\n.list[data-v-5ebfce82] {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n          flex: 1;\n  overflow: auto;\n  padding: 16px;\n}\n.list > li + li[data-v-5ebfce82] {\n  margin-top: 12px;\n}\n.item[data-v-5ebfce82] {\n  padding: 12px;\n  background: #fff;\n}\n.item-content[data-v-5ebfce82] {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n}\n.w-radio[data-v-5ebfce82] {\n  margin-left: 6px;\n  height: 20px;\n  opacity: 0;\n  margin-right: 8px;\n}\n.w-radio-next[data-v-5ebfce82] {\n  position: relative;\n}\n.w-radio-next > .radio-box[data-v-5ebfce82] {\n  position: absolute;\n  top: 35px;\n  left: -28px;\n  width: 20px;\n  height: 20px;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 20px;\n}\n.w-radio-next > .radio-box.checked[data-v-5ebfce82] {\n  border-width: 0;\n  background: -webkit-linear-gradient(left, #FF9800 0%, #FF5F00 100%);\n  background: linear-gradient(90deg, #FF9800 0%, #FF5F00 100%);\n  box-shadow: 0px 0px 3px 3px rgba(255, 141, 0, 0.4);\n}\n.w-radio-next > .radio-box.checked[data-v-5ebfce82]::before {\n  content: '';\n  position: absolute;\n  top: -1px;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: url('../assets/sign_right.png');\n  background-position: center;\n  background-size: 60%;\n  background-repeat: no-repeat;\n}\nfooter[data-v-5ebfce82] {\n  height: 46px;\n  padding: 10px 16px;\n  background: #fafafa;\n}\n.mobile-dialog .box[data-v-5ebfce82],\n.empty-dialog .box[data-v-5ebfce82] {\n  background: #fff;\n  border-radius: 16px;\n}\n.mobile-dialog .box .content[data-v-5ebfce82],\n.empty-dialog .box .content[data-v-5ebfce82] {\n  padding: 16px 18px;\n}\n.mobile-dialog .box .btn[data-v-5ebfce82],\n.empty-dialog .box .btn[data-v-5ebfce82] {\n  padding: 12px;\n  border-top: 1px solid #e6e6e6;\n}\n.mobile-dialog .box .btn > button[data-v-5ebfce82],\n.empty-dialog .box .btn > button[data-v-5ebfce82] {\n  width: 140px;\n}\n.mobile-dialog[data-v-5ebfce82] .weui-cells:after,\n.empty-dialog[data-v-5ebfce82] .weui-cells:after {\n  content: none;\n}\n.mobile-dialog[data-v-5ebfce82] .weui-cell:before,\n.empty-dialog[data-v-5ebfce82] .weui-cell:before {\n  content: none;\n}\n.mobile-dialog[data-v-5ebfce82] .vux-x-input,\n.empty-dialog[data-v-5ebfce82] .vux-x-input {\n  background: #F0F0F0;\n  border-radius: 44px;\n  margin-top: 12px;\n  font-size: 14px;\n}\n.empty-dialog[data-v-5ebfce82] {\n  font-size: 14px;\n}\n.empty-dialog .pic[data-v-5ebfce82] {\n  width: 163px;\n  height: 135px;\n  margin: 16px auto;\n  background-image: url(../assets/welfare_exchange_failed.png);\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n"],sourceRoot:""}])},cafJ:function(e,n,t){"use strict";function a(e){t("tkJc")}Object.defineProperty(n,"__esModule",{value:!0});var i=t("//Fk"),o=t.n(i),r=t("6kxu"),d=t("PPEA"),c=(String,Number,String,String,Boolean,String,Boolean,{name:"WCountdown",props:{color:{type:String,default:"#33B87E"},startNum:{type:Number,default:60},initTxt:{type:String,default:"获取验证码"},countingTxt:{type:[String,Boolean]},endTxt:{type:String,default:"重新获取"},value:{type:Boolean}},computed:{countingShowTxt:function(){var e=this.timeCount>9?this.timeCount:"0"+this.timeCount;if(this.countingTxt){if("string"==typeof this.countingTxt){return this.countingTxt.indexOf("$time")>-1?this.countingTxt.replace("$time",e):this.countingTxt+"("+e+")"}return this.endTxt+"("+e+")"}return e}},data:function(){return{timer:null,timeCount:this.startNum,showTxt:this.initTxt}},watch:{value:function(e){e&&this.startCount()}},methods:{startCount:function(){var e=this;this.timer=setInterval(function(){e.timeCount>0?e.timeCount=e.timeCount-1:(clearInterval(e.timer),e.$emit("input",!1),e.timeCount=e.startNum,e.showTxt=e.endTxt)},1e3)},handleClick:function(){this.value||this.$emit("click-event")}}}),l=function(){var e=this,n=e.$createElement;return(e._self._c||n)("span",{staticClass:"count-down",style:{color:e.value?"#ccc":e.color},on:{click:e.handleClick}},[e._v("\n    "+e._s(e.value?e.countingShowTxt:e.showTxt)+"\n")])},s=[],A={render:l,staticRenderFns:s},b=A,g=t("VU/8"),p=g(c,b,!1,null,null,null),u=p.exports,f=t("gyMJ"),x=t("mw3O"),C=t.n(x),h=t("DpJg"),m=t("fxnj"),v=/^1[3456789]\d{9}$/,B=(r.a,d.a,t("fxnj")),E=/^1[3456789]\d{9}$/,w={name:"WelfareExchange",components:{WCard:r.a,WMerchantItem:d.a,WCountdown:u},data:function(){return{selected:"",list:[],lon:"",lat:"",mobile:"",code:"",countStart:!1,mobileDialog:{show:!1},emptyDialog:{show:!1}}},computed:{welfareList:function(){return this.list.map(function(e){e.desc="签到"+e.checkin_days+"天，即享"+e.checkin_num+"瓶啤酒";var n={filename:e.store_avatar,type:"avatar"};return e.store_avatar=h.a+"v1/files/download?"+C.a.stringify(n),e})},countColor:function(){return E.test(this.mobile)?"#FF5F00":"#666"},exchangeDisabled:function(){return!(E.test(this.mobile)&&this.code)}},created:function(){this.initExchage(),this.initUser()},methods:{initUser:function(){var e=this;Object(f.k)().then(function(n){var t=n.data;e.mobile=t.mobile})},initExchage:function(){var e=this;this.getLocation().then(function(){var n={lon:e.lon,lat:e.lat,distince:9999999,num:999999};Object(f.h)(n).then(function(n){var t=n.data;n.res;e.list=t||[]})})},getLocation:function(){var e=this;return new o.a(function(n,t){B.getLocation({type:"wgs84",success:function(t){e.lon=t.longitude,e.lat=t.latitude,n()}})})},handleSelect:function(e){this.selected=e},handleExchange:function(){this.mobile?this.exchange():this.mobileDialog.show=!0},exchange:function(){var e=this,n={merchant_id:this.selected,mobile:this.mobile,code:this.code};Object(f.d)(n).then(function(n){var t=n.res;e.mobileDialog.show=!1,"ERR_NO_WELFARE"===t.code?e.emptyDialog.show=!0:e.$vux.toast.show({type:"text",text:t.message}),e.initExchage()})},handleStart:function(){var e=this;E.test(this.mobile)&&Object(f.l)({mobile:this.mobile}).then(function(n){n.res;e.$vux.toast.show({type:"text",text:"验证码发送成功"}),e.countStart=!0})},handleGoSign:function(){this.$router.replace({name:"sign_page"})}}},k=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"welfare-exchange"},[t("ul",{staticClass:"list"},e._l(e.welfareList,function(n){return t("li",{key:n.id,on:{click:function(t){return e.handleSelect(n.id)}}},[t("w-card",{staticClass:"item"},[t("div",{staticClass:"item-content"},[t("input",{staticClass:"w-radio",attrs:{type:"radio",name:"select",id:n.id},domProps:{checked:n.id===e.selected}}),e._v(" "),t("label",{staticClass:"w-radio-next",attrs:{for:n.id}},[t("span",{class:["radio-box",{checked:n.id===e.selected}]}),e._v(" "),t("w-merchant-item",{attrs:{name:n.store_name,address:n.address,desc:n.desc,logo:n.store_avatar}})],1)])])],1)}),0),e._v(" "),t("footer",[t("x-button",{attrs:{type:"primary",disabled:!e.selected},nativeOn:{click:function(n){return e.handleExchange(n)}}},[e._v("领取福利")])],1),e._v(" "),t("x-dialog",{staticClass:"mobile-dialog",attrs:{"dialog-style":{"max-width":"100%","background-color":"transparent",margin:"184px 34px"}},model:{value:e.mobileDialog.show,callback:function(n){e.$set(e.mobileDialog,"show",n)},expression:"mobileDialog.show"}},[t("div",{staticClass:"box"},[t("div",{staticClass:"content"},[t("h2",{staticClass:"title"},[e._v("输入手机号，领取您的福利")]),e._v(" "),t("group",{staticClass:"form-group"},[t("x-input",{attrs:{placeholder:"请输入手机号",type:"text","is-type":"china-mobile"},model:{value:e.mobile,callback:function(n){e.mobile=n},expression:"mobile"}},[t("w-countdown",{attrs:{slot:"right",color:e.countColor},on:{"click-event":e.handleStart},slot:"right",model:{value:e.countStart,callback:function(n){e.countStart=n},expression:"countStart"}})],1),e._v(" "),t("x-input",{attrs:{placeholder:"请输入验证码"},model:{value:e.code,callback:function(n){e.code=n},expression:"code"}})],1)],1),e._v(" "),t("div",{staticClass:"btn"},[t("x-button",{attrs:{mini:"",type:"primary",disabled:e.exchangeDisabled},nativeOn:{click:function(n){return e.exchange(n)}}},[e._v("领取福利")])],1)])]),e._v(" "),t("x-dialog",{staticClass:"empty-dialog",attrs:{"dialog-style":{"max-width":"100%","background-color":"transparent",margin:"184px 34px"}},model:{value:e.emptyDialog.show,callback:function(n){e.$set(e.emptyDialog,"show",n)},expression:"emptyDialog.show"}},[t("div",{staticClass:"box"},[t("div",{staticClass:"content"},[t("div",{staticClass:"pic"}),e._v(" "),t("p",[e._v("你还没有完成签到任务哦"),t("br"),e._v("赶快去签到吧~")])]),e._v(" "),t("div",{staticClass:"btn"},[t("x-button",{attrs:{mini:"",type:"primary"},nativeOn:{click:function(n){return e.handleGoSign(n)}}},[e._v("去签到")])],1)])])],1)},F=[],y={render:k,staticRenderFns:F},D=y,_=t("VU/8"),S=a,T=_(w,D,!1,S,"data-v-5ebfce82",null);n.default=T.exports},oVBp:function(e,n,t){e.exports=t.p+"static/img/welfare_exchange_failed.f09c0fe.png"},tkJc:function(e,n,t){var a=t("XfhG");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("ed1cb15c",a,!0,{})}});
//# sourceMappingURL=1.6d08215aee8e58bc1c0e.js.map