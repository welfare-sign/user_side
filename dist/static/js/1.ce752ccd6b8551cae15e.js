webpackJsonp([1],{D1o5:function(n,t,e){var a=e("IadT");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);e("rjj0")("37a27e5a",a,!0,{})},IadT:function(n,t,e){var a=e("kxFB");t=n.exports=e("FZ+f")(!0),t.push([n.i,"\n.linear-gradient-horizontal[data-v-7411675f] {\n  background: -webkit-linear-gradient(left, #FF9800 0%, #FF5F00 100%);\n  background: linear-gradient(90deg, #FF9800 0%, #FF5F00 100%);\n}\n.linear-gradient-horizontal-opacity[data-v-7411675f] {\n  background: -webkit-linear-gradient(left, rgba(255, 152, 0, 0.5) 0%, rgba(255, 95, 0, 0.5) 100%);\n  background: linear-gradient(90deg, rgba(255, 152, 0, 0.5) 0%, rgba(255, 95, 0, 0.5) 100%);\n}\n.linear-gradient-vertical[data-v-7411675f] {\n  background: -webkit-linear-gradient(315deg, #FF9800 0%, #FF5F00 100%);\n  background: linear-gradient(135deg, #FF9800 0%, #FF5F00 100%);\n}\n.primary-box-shadow[data-v-7411675f] {\n  box-shadow: 0 5px 10px 0 rgba(255, 141, 0, 0.3);\n}\n.welfare-exchange[data-v-7411675f] {\n  background: #f6f6f6;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n          flex-direction: column;\n  height: 100vh;\n  overflow: hidden;\n}\n.list[data-v-7411675f] {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n          flex: 1;\n  overflow: auto;\n  padding: 16px;\n}\n.list > li + li[data-v-7411675f] {\n  margin-top: 12px;\n}\n.item[data-v-7411675f] {\n  padding: 12px;\n  background: #fff;\n}\n.item-content[data-v-7411675f] {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n}\n.w-radio[data-v-7411675f] {\n  margin-left: 6px;\n  height: 20px;\n  opacity: 0;\n  margin-right: 8px;\n}\n.w-radio-next[data-v-7411675f] {\n  position: relative;\n}\n.w-radio-next > .radio-box[data-v-7411675f] {\n  position: absolute;\n  top: 35px;\n  left: -28px;\n  width: 20px;\n  height: 20px;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 20px;\n}\n.w-radio-next > .radio-box.checked[data-v-7411675f] {\n  border-width: 0;\n  background: -webkit-linear-gradient(left, #FF9800 0%, #FF5F00 100%);\n  background: linear-gradient(90deg, #FF9800 0%, #FF5F00 100%);\n  box-shadow: 0px 0px 3px 3px rgba(255, 141, 0, 0.4);\n}\n.w-radio-next > .radio-box.checked[data-v-7411675f]::before {\n  content: '';\n  position: absolute;\n  top: -1px;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: url("+a(e("TeOC"))+");\n  background-position: center;\n  background-size: 60%;\n  background-repeat: no-repeat;\n}\nfooter[data-v-7411675f] {\n  height: 46px;\n  padding: 10px 16px;\n  background: #fafafa;\n}\n.mobile-dialog .box[data-v-7411675f],\n.empty-dialog .box[data-v-7411675f] {\n  background: #fff;\n  border-radius: 16px;\n}\n.mobile-dialog .box .content[data-v-7411675f],\n.empty-dialog .box .content[data-v-7411675f] {\n  padding: 16px 18px;\n}\n.mobile-dialog .box .btn[data-v-7411675f],\n.empty-dialog .box .btn[data-v-7411675f] {\n  padding: 12px;\n  border-top: 1px solid #e6e6e6;\n}\n.mobile-dialog .box .btn > button[data-v-7411675f],\n.empty-dialog .box .btn > button[data-v-7411675f] {\n  width: 140px;\n}\n.mobile-dialog[data-v-7411675f] .weui-cells:after,\n.empty-dialog[data-v-7411675f] .weui-cells:after {\n  content: none;\n}\n.mobile-dialog[data-v-7411675f] .weui-cell:before,\n.empty-dialog[data-v-7411675f] .weui-cell:before {\n  content: none;\n}\n.mobile-dialog[data-v-7411675f] .vux-x-input,\n.empty-dialog[data-v-7411675f] .vux-x-input {\n  background: #F0F0F0;\n  border-radius: 44px;\n  margin-top: 12px;\n  font-size: 14px;\n}\n.empty-dialog[data-v-7411675f] {\n  font-size: 14px;\n}\n.empty-dialog .pic[data-v-7411675f] {\n  width: 163px;\n  height: 135px;\n  margin: 16px auto;\n  background-image: url("+a(e("oVBp"))+");\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n","",{version:3,sources:["/Users/lex/Works/CheckIn/user_side/src/views/WelfareExchange.vue"],names:[],mappings:";AACA;EACE,oEAAoE;EACpE,6DAA6D;CAC9D;AACD;EACE,iGAAiG;EACjG,0FAA0F;CAC3F;AACD;EACE,sEAAsE;EACtE,8DAA8D;CAC/D;AACD;EACE,gDAAgD;CACjD;AACD;EACE,oBAAoB;EACpB,qBAAqB;EACrB,sBAAsB;EACtB,cAAc;EACd,6BAA6B;EAC7B,8BAA8B;EAC9B,+BAA+B;UACvB,uBAAuB;EAC/B,cAAc;EACd,iBAAiB;CAClB;AACD;EACE,oBAAoB;EACpB,gBAAgB;UACR,QAAQ;EAChB,eAAe;EACf,cAAc;CACf;AACD;EACE,iBAAiB;CAClB;AACD;EACE,cAAc;EACd,iBAAiB;CAClB;AACD;EACE,qBAAqB;EACrB,sBAAsB;EACtB,cAAc;EACd,0BAA0B;EAC1B,4BAA4B;UACpB,oBAAoB;CAC7B;AACD;EACE,iBAAiB;EACjB,aAAa;EACb,WAAW;EACX,kBAAkB;CACnB;AACD;EACE,mBAAmB;CACpB;AACD;EACE,mBAAmB;EACnB,UAAU;EACV,YAAY;EACZ,YAAY;EACZ,aAAa;EACb,qCAAqC;EACrC,oBAAoB;CACrB;AACD;EACE,gBAAgB;EAChB,oEAAoE;EACpE,6DAA6D;EAC7D,mDAAmD;CACpD;AACD;EACE,YAAY;EACZ,mBAAmB;EACnB,UAAU;EACV,QAAQ;EACR,YAAY;EACZ,aAAa;EACb,0CAA4C;EAC5C,4BAA4B;EAC5B,qBAAqB;EACrB,6BAA6B;CAC9B;AACD;EACE,aAAa;EACb,mBAAmB;EACnB,oBAAoB;CACrB;AACD;;EAEE,iBAAiB;EACjB,oBAAoB;CACrB;AACD;;EAEE,mBAAmB;CACpB;AACD;;EAEE,cAAc;EACd,8BAA8B;CAC/B;AACD;;EAEE,aAAa;CACd;AACD;;EAEE,cAAc;CACf;AACD;;EAEE,cAAc;CACf;AACD;;EAEE,oBAAoB;EACpB,oBAAoB;EACpB,iBAAiB;EACjB,gBAAgB;CACjB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,aAAa;EACb,cAAc;EACd,kBAAkB;EAClB,gDAA6D;EAC7D,6BAA6B;EAC7B,yBAAyB;CAC1B",file:"WelfareExchange.vue",sourcesContent:["\n.linear-gradient-horizontal[data-v-7411675f] {\n  background: -webkit-linear-gradient(left, #FF9800 0%, #FF5F00 100%);\n  background: linear-gradient(90deg, #FF9800 0%, #FF5F00 100%);\n}\n.linear-gradient-horizontal-opacity[data-v-7411675f] {\n  background: -webkit-linear-gradient(left, rgba(255, 152, 0, 0.5) 0%, rgba(255, 95, 0, 0.5) 100%);\n  background: linear-gradient(90deg, rgba(255, 152, 0, 0.5) 0%, rgba(255, 95, 0, 0.5) 100%);\n}\n.linear-gradient-vertical[data-v-7411675f] {\n  background: -webkit-linear-gradient(315deg, #FF9800 0%, #FF5F00 100%);\n  background: linear-gradient(135deg, #FF9800 0%, #FF5F00 100%);\n}\n.primary-box-shadow[data-v-7411675f] {\n  box-shadow: 0 5px 10px 0 rgba(255, 141, 0, 0.3);\n}\n.welfare-exchange[data-v-7411675f] {\n  background: #f6f6f6;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n          flex-direction: column;\n  height: 100vh;\n  overflow: hidden;\n}\n.list[data-v-7411675f] {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n          flex: 1;\n  overflow: auto;\n  padding: 16px;\n}\n.list > li + li[data-v-7411675f] {\n  margin-top: 12px;\n}\n.item[data-v-7411675f] {\n  padding: 12px;\n  background: #fff;\n}\n.item-content[data-v-7411675f] {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n}\n.w-radio[data-v-7411675f] {\n  margin-left: 6px;\n  height: 20px;\n  opacity: 0;\n  margin-right: 8px;\n}\n.w-radio-next[data-v-7411675f] {\n  position: relative;\n}\n.w-radio-next > .radio-box[data-v-7411675f] {\n  position: absolute;\n  top: 35px;\n  left: -28px;\n  width: 20px;\n  height: 20px;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 20px;\n}\n.w-radio-next > .radio-box.checked[data-v-7411675f] {\n  border-width: 0;\n  background: -webkit-linear-gradient(left, #FF9800 0%, #FF5F00 100%);\n  background: linear-gradient(90deg, #FF9800 0%, #FF5F00 100%);\n  box-shadow: 0px 0px 3px 3px rgba(255, 141, 0, 0.4);\n}\n.w-radio-next > .radio-box.checked[data-v-7411675f]::before {\n  content: '';\n  position: absolute;\n  top: -1px;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: url('../assets/sign_right.png');\n  background-position: center;\n  background-size: 60%;\n  background-repeat: no-repeat;\n}\nfooter[data-v-7411675f] {\n  height: 46px;\n  padding: 10px 16px;\n  background: #fafafa;\n}\n.mobile-dialog .box[data-v-7411675f],\n.empty-dialog .box[data-v-7411675f] {\n  background: #fff;\n  border-radius: 16px;\n}\n.mobile-dialog .box .content[data-v-7411675f],\n.empty-dialog .box .content[data-v-7411675f] {\n  padding: 16px 18px;\n}\n.mobile-dialog .box .btn[data-v-7411675f],\n.empty-dialog .box .btn[data-v-7411675f] {\n  padding: 12px;\n  border-top: 1px solid #e6e6e6;\n}\n.mobile-dialog .box .btn > button[data-v-7411675f],\n.empty-dialog .box .btn > button[data-v-7411675f] {\n  width: 140px;\n}\n.mobile-dialog[data-v-7411675f] .weui-cells:after,\n.empty-dialog[data-v-7411675f] .weui-cells:after {\n  content: none;\n}\n.mobile-dialog[data-v-7411675f] .weui-cell:before,\n.empty-dialog[data-v-7411675f] .weui-cell:before {\n  content: none;\n}\n.mobile-dialog[data-v-7411675f] .vux-x-input,\n.empty-dialog[data-v-7411675f] .vux-x-input {\n  background: #F0F0F0;\n  border-radius: 44px;\n  margin-top: 12px;\n  font-size: 14px;\n}\n.empty-dialog[data-v-7411675f] {\n  font-size: 14px;\n}\n.empty-dialog .pic[data-v-7411675f] {\n  width: 163px;\n  height: 135px;\n  margin: 16px auto;\n  background-image: url(../assets/welfare_exchange_failed.png);\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n"],sourceRoot:""}])},cafJ:function(n,t,e){"use strict";function a(n){e("D1o5")}Object.defineProperty(t,"__esModule",{value:!0});var i=e("//Fk"),o=e.n(i),r=e("6kxu"),d=e("PPEA"),l=(String,Number,String,String,Boolean,String,Boolean,{name:"WCountdown",props:{color:{type:String,default:"#33B87E"},startNum:{type:Number,default:60},initTxt:{type:String,default:"获取验证码"},countingTxt:{type:[String,Boolean]},endTxt:{type:String,default:"重新获取"},value:{type:Boolean}},computed:{countingShowTxt:function(){var n=this.timeCount>9?this.timeCount:"0"+this.timeCount;if(this.countingTxt){if("string"==typeof this.countingTxt){return this.countingTxt.indexOf("$time")>-1?this.countingTxt.replace("$time",n):this.countingTxt+"("+n+")"}return this.endTxt+"("+n+")"}return n}},data:function(){return{timer:null,timeCount:this.startNum,showTxt:this.initTxt}},watch:{value:function(n){n&&this.startCount()}},methods:{startCount:function(){var n=this;this.timer=setInterval(function(){n.timeCount>0?n.timeCount=n.timeCount-1:(clearInterval(n.timer),n.$emit("input",!1),n.timeCount=n.startNum,n.showTxt=n.endTxt)},1e3)},handleClick:function(){this.value||this.$emit("click-event")}}}),c=function(){var n=this,t=n.$createElement;return(n._self._c||t)("span",{staticClass:"count-down",style:{color:n.value?"#ccc":n.color},on:{click:n.handleClick}},[n._v("\n    "+n._s(n.value?n.countingShowTxt:n.showTxt)+"\n")])},s=[],A={render:c,staticRenderFns:s},g=A,p=e("VU/8"),u=p(l,g,!1,null,null,null),b=u.exports,f=e("gyMJ"),x=e("mw3O"),C=e.n(x),h=e("DpJg"),m=e("fxnj"),v=/^1[3456789]\d{9}$/,B=(r.a,d.a,e("fxnj")),E=/^1[3456789]\d{9}$/,w={name:"WelfareExchange",components:{WCard:r.a,WMerchantItem:d.a,WCountdown:b},data:function(){return{selected:"",list:[],lon:"",lat:"",mobile:"",code:"",countStart:!1,mobileDialog:{show:!1},emptyDialog:{show:!1}}},computed:{welfareList:function(){return this.list.map(function(n){n.desc="签到"+n.checkin_days+"天，即享"+n.checkin_num+"瓶啤酒";var t={filename:n.store_avatar,type:"avatar"};return n.store_avatar=h.a+"v1/files/download?"+C.a.stringify(t),n})},countColor:function(){return E.test(this.mobile)?"#FF5F00":"#666"},exchangeDisabled:function(){return!(E.test(this.mobile)&&this.code)}},created:function(){this.initExchage(),this.initUser()},methods:{initUser:function(){var n=this;Object(f.k)().then(function(t){var e=t.data;n.mobile=e.mobile})},initExchage:function(){var n=this;this.getLocation().then(function(){var t={lon:n.lon,lat:n.lat,distince:9999999,num:999999};Object(f.h)(t).then(function(t){var e=t.data;t.res;n.list=e||[]})})},getLocation:function(){var n=this;return new o.a(function(t,e){B.getLocation({type:"wgs84",success:function(e){n.lon=e.longitude,n.lat=e.latitude,t()}})})},handleSelect:function(n){this.selected=n},handleExchange:function(){this.mobile?this.exchange():this.mobileDialog.show=!0},exchange:function(){var n=this,t={merchant_id:this.selected,mobile:this.mobile,code:this.code};Object(f.d)(t).then(function(t){var e=t.res;n.mobileDialog.show=!1,"ERR_NO_WELFARE"===e.code?n.emptyDialog.show=!0:n.$vux.toast.show({type:"text",text:e.message}),n.initExchage()})},handleStart:function(){var n=this;E.test(this.mobile)&&Object(f.l)({mobile:this.mobile}).then(function(t){t.res;n.$vux.toast.show({type:"text",text:"验证码发送成功"}),n.countStart=!0})},handleGoSign:function(){this.$router.replace({name:"sign_page"})}}},k=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"welfare-exchange"},[e("ul",{staticClass:"list"},n._l(n.welfareList,function(t){return e("li",{key:t.id,on:{click:function(e){return n.handleSelect(t.id)}}},[e("w-card",{staticClass:"item"},[e("div",{staticClass:"item-content"},[e("input",{staticClass:"w-radio",attrs:{type:"radio",name:"select",id:t.id},domProps:{checked:t.id===n.selected}}),n._v(" "),e("label",{staticClass:"w-radio-next",attrs:{for:t.id}},[e("span",{class:["radio-box",{checked:t.id===n.selected}]}),n._v(" "),e("w-merchant-item",{attrs:{name:t.store_name,address:t.address,desc:t.desc,logo:t.store_avatar}})],1)])])],1)}),0),n._v(" "),e("footer",[e("x-button",{attrs:{type:"primary",disabled:!n.selected},nativeOn:{click:function(t){return n.handleExchange(t)}}},[n._v("领取福利")])],1),n._v(" "),e("x-dialog",{staticClass:"mobile-dialog",attrs:{"dialog-style":{"max-width":"100%","background-color":"transparent",margin:"184px 34px"}},model:{value:n.mobileDialog.show,callback:function(t){n.$set(n.mobileDialog,"show",t)},expression:"mobileDialog.show"}},[e("div",{staticClass:"box"},[e("div",{staticClass:"content"},[e("h2",{staticClass:"title"},[n._v("输入手机号，领取您的福利")]),n._v(" "),e("group",{staticClass:"form-group"},[e("x-input",{attrs:{placeholder:"请输入手机号",type:"text","is-type":"china-mobile"},model:{value:n.mobile,callback:function(t){n.mobile=t},expression:"mobile"}},[e("w-countdown",{attrs:{slot:"right",color:n.countColor},on:{"click-event":n.handleStart},slot:"right",model:{value:n.countStart,callback:function(t){n.countStart=t},expression:"countStart"}})],1),n._v(" "),e("x-input",{attrs:{placeholder:"请输入验证码"},model:{value:n.code,callback:function(t){n.code=t},expression:"code"}})],1)],1),n._v(" "),e("div",{staticClass:"btn"},[e("x-button",{attrs:{mini:"",type:"primary",disabled:n.exchangeDisabled},nativeOn:{click:function(t){return n.exchange(t)}}},[n._v("领取福利")])],1)])]),n._v(" "),e("x-dialog",{staticClass:"empty-dialog",attrs:{"dialog-style":{"max-width":"100%","background-color":"transparent",margin:"184px 34px"}},model:{value:n.emptyDialog.show,callback:function(t){n.$set(n.emptyDialog,"show",t)},expression:"emptyDialog.show"}},[e("div",{staticClass:"box"},[e("div",{staticClass:"content"},[e("div",{staticClass:"pic"}),n._v(" "),e("p",[n._v("你还没有完成签到任务哦"),e("br"),n._v("赶快去签到吧~")])]),n._v(" "),e("div",{staticClass:"btn"},[e("x-button",{attrs:{mini:"",type:"primary",disabled:n.exchangeDisabled},nativeOn:{click:function(t){return n.handleGoSign(t)}}},[n._v("去签到")])],1)])])],1)},F=[],y={render:k,staticRenderFns:F},D=y,_=e("VU/8"),S=a,T=_(w,D,!1,S,"data-v-7411675f",null);t.default=T.exports},oVBp:function(n,t,e){n.exports=e.p+"static/img/welfare_exchange_failed.f09c0fe.png"}});
//# sourceMappingURL=1.ce752ccd6b8551cae15e.js.map